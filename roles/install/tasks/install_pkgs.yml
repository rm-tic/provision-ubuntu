---
- name: Include Task repo.yml
  include: add_repo.yml

- name: Include Task latest.yml
  include: url_deb_latest.yml

- name: Update Repository
  apt:
    update-cache: yes
  tags: apt_update

- name: Install Packages .deb from URL
  apt:
    deb: "{{ item }}"
    state: present
  loop: "{{ pkgs_urls }}"
  tags: pkgs_install

- name: Install Packages from Repository
  apt:
    name: "{{ item }}"
    state: present
  loop: "{{ pkgs }}"
  tags: pkgs_install

- name: Check Docker-CE is Installed
  shell: >
    [ "$(dpkg-query -W -f='${db:Status-Abbrev}' docker-ce 2>/dev/null | cut -c1-2)" = "ii" ] ; echo "$?"
  register: docker_is_installed
  tags: docker

- name: Install Docker
  shell: >
    curl -fsSL https://get.docker.com | bash -
  args:
    warn: no
  when: docker_is_installed.stdout != 0
  tags: docker

- name: Install Oh My Zsh!
  shell: >
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
  become: no
  tags: zsh
  
- name: Change Default SHELL to ZSH
  user:
    name: "{{ ansible_env.SUDO_USER }}"
    shell: /usr/bin/zsh
  tags: zsh

- name: Flatpak | Add Flathub Repository
  flatpak_remote:
    name: flathub
    state: present
    flatpakrepo_url: https://flathub.org/repo/flathub.flatpakrepo

- name: Flatpak | Install Celluloid
  flatpak:
    name: io.github.celluloid_player.Celluloid
    state: present

- name: Flatpak | Install handbrake
  flatpak:
    name: fr.handbrake.ghb
    state: present

- name: Flatpak | Install Steam
  flatpak:
    name: com.valvesoftware.Steam
    state: present

- name: Flatpak | Install WPS Office
  flatpak:
    name: com.wps.Office
    state: present

- name: Snap | Install Anki
  snap:
    name: anki-woodrow
    state: present
    channel: stable
  tags: anki

- name: Snap | Install Audacity
  snap:
    name: audacity
    state: present
    channel: stable
  tags: audacity

- name: Snap | Install Authy
  snap:
    name: authy
    state: present
    channel: beta
  tags: authy

- name: Snap | Install VSCode
  snap:
    name: code
    state: present
    classic: yes
  tags: code

- name: Snap | Install Discord
  snap:
    name: discord
    state: present
    channel: stable
  tags: discord

- name: Snap | Install Foliate
  snap:
    name: foliate
    state: present
    channel: stable
  tags: foliate

- name: Snap | Install GIMP
  snap:
    name: gimp
    state: present
    channel: stable
  tags: gimp

- name: Snap | Install Heimer
  snap:
    name: heimer
    state: present
    channel: stable
  tags: heimer

- name: Snap | Install Inkscape
  snap:
    name: inkscape
    state: present
    channel: stable
  tags: inkscape

- name: Snap | Install OBS Studio
  snap:
    name: obs-studio
    state: present
    channel: stable
  tags: obs

- name: Snap | Install Postman
  snap:
    name: postman
    state: present
    channel: stable
  tags: postman

- name: Snap | Install scrcpy
  snap:
    name: scrcpy
    state: present
    channel: stable
  tags: scrcpy

- name: Snap | Install Skype
  snap:
    name: skype
    state: present
    channel: stable
    classic: yes
  tags: skype

- name: Snap | Install Typora
  snap:
    name: typora
    state: present
    channel: stable
  tags: typora

- name: Snap | Install VLC
  snap:
    name: vlc
    state: present
    channel: stable
  tags: vlc