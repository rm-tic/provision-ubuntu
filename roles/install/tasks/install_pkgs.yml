---
- name: Include Task repo.yml
  include: add_repo.yml

- name: Include Task latest.yml
  include: url_deb_latest.yml

- name: Update Repository
  apt:
    update-cache: yes
  tags: apt_update

- name: Install Packages .deb from URL
  apt:
    deb: "{{ item }}"
    state: present
  loop: "{{ pkgs_urls }}"
  tags: pkgs_install

- name: Install Packages from Repository
  apt:
    name: "{{ item }}"
    state: present
  loop: "{{ pkgs }}"
  tags: pkgs_install

- name: Check Docker-CE is Installed
  shell: >
    [ "$(dpkg-query -W -f='${db:Status-Abbrev}' docker-ce 2>/dev/null | cut -c1-2)" = "ii" ] ; echo "$?"
  register: docker_is_installed

- name: Install Docker
  shell: >
    curl -fsSL https://get.docker.com | bash -
  args:
    warn: no
  when: docker_is_installed.stdout != 0
  tags: pkgs_install

- name: Install Oh My Zsh!
  shell: >
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended
  tags: ohmyzsh_install

- name: Copy ZSH Template for ~/.zshrc
  copy:
    src: "/home/{{ user }}/.oh-my-zsh/templates/zshrc.zsh-template"
    dest: "/home/{{ user }}/.zshrc"
    remote_src: yes
  tags: ohmyzsh_install

- name: Change Default SHELL to ZSH
  user:
    name: "{{ user }}"
    shell: /usr/bin/zsh
  tags: ohmyzsh_install

- name: Install VSCode
  snap:
    name: code
    state: present
    classic: yes
  tags: code

- name: Install Foliate
  snap:
    name: foliate
    state: present
    channel: stable
  tags: foliate

- name: Install Heimer
  snap:
    name: heimer
    state: present
    channel: stable
  tags: heimer

- name: Install scrcpy
  snap:
    name: scrcpy
    state: present
    channel: stable
  tags: scrcpy

- name: Install Skype
  snap:
    name: skype
    state: present
    channel: stable
    classic: yes
  tags: skype

- name: Install Typora
  snap:
    name: typora
    state: present
    channel: stable
  tags: typora

- name: Install VLC
  snap:
    name: vlc
    state: present
    channel: stable
  tags: vlc